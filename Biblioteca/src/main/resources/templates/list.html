<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Catálogo de Libros</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1>Libros Disponibles</h1>
        
        <!-- Formulario de búsqueda -->
        <form th:action="@{/libros}" method="get" class="mb-4">
            <input type="text" name="titulo" th:value="${titulo}" placeholder="Buscar por título">
            <button type="submit" class="btn btn-primary">Buscar</button>
        </form>
        
        <!-- Tabla de resultados -->
        <table class="table">
            <thead>
                <tr>
                    <th>Título</th>
                    <th>Autor(es)</th>
                    <th>Ejemplares Disponibles</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="libro : ${libros}">
                    <td th:text="${libro.titulo}"></td>
                    <td th:text="${libro.autores}"></td>
                    <td th:text="${libro.ejemplaresDisponibles}"></td>
                </tr>
            </tbody>
        </table>
        
        <!-- Paginación -->
        <div th:with="
            totalPages = ${libros.totalPages},
            current = ${libros.number}
        ">
            <span th:if="${totalPages > 1}">
                <a th:href="@{/libros(titulo=${titulo}, page=0)}">Primera</a>
                <a th:if="${current > 0}" th:href="@{/libros(titulo=${titulo}, page=${current - 1})}">Anterior</a>
                <span th:text="${current + 1 + ' / ' + totalPages}"></span>
                <a th:if="${current < totalPages - 1}" th:href="@{/libros(titulo=${titulo}, page=${current + 1})}">Siguiente</a>
                <a th:href="@{/libros(titulo=${titulo}, page=${totalPages - 1})}">Última</a>
            </span>
        </div>
    </div>
</body>
</html>